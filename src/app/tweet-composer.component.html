<div class="tweet-composer">
  <ng-container *ngFor="let post of threadPosts; let i = index">
    <div class="tweet-post">
      <div class="avatar">
        <img src="https://api.dicebear.com/7.x/avataaars/svg?seed=Bolt" alt="User avatar" />
      </div>
      <div class="compose-area">
        <div class="text-input-wrapper" *ngIf="post.isEditing">
          <textarea
            [(ngModel)]="post.text"
            placeholder="What's happening?"
            [rows]="5"
            (input)="onInput($event, i)"
            maxlength="280"
          ></textarea>
        </div>
        <div class="post-text" *ngIf="!post.isEditing">
          {{ post.text }}
        </div>
      </div>
    </div>
  </ng-container>

  <div class="actions">
    <div class="media-tools" *ngIf="threadPosts[threadPosts.length - 1].isEditing">
      <button class="icon-button" title="Media">
        <svg viewBox="0 0 24 24" width="20" height="20">
          <path fill="currentColor" d="M19.75 2H4.25C3.01 2 2 3.01 2 4.25v15.5C2 20.99 3.01 22 4.25 22h15.5c1.24 0 2.25-1.01 2.25-2.25V4.25C22 3.01 20.99 2 19.75 2zM4.25 3.5h15.5c.413 0 .75.337.75.75v9.676l-3.858-3.858c-.14-.14-.33-.22-.53-.22h-.003c-.2 0-.393.08-.532.224l-4.317 4.384-1.813-1.806c-.14-.14-.33-.22-.53-.22-.193-.03-.395.08-.535.227L3.5 17.642V4.25c0-.413.337-.75.75-.75zm-.744 16.28l5.418-5.534 6.282 6.254H4.25c-.402 0-.727-.322-.744-.72zm16.244.72h-2.42l-5.007-4.987 3.792-3.85 4.385 4.384v3.703c0 .413-.337.75-.75.75z"/>
        </svg>
      </button>
      <button class="icon-button" title="GIF">
        <svg viewBox="0 0 24 24" width="20" height="20">
          <path fill="currentColor" d="M19 10.5V8.8h-4.4v6.4h1.7v-2h2v-1.7h-2v-1H19zm-7.3-1.7h1.7v6.4h-1.7V8.8zm-3.6 1.6c.4 0 .9.2 1.2.5l1.2-1C9.9 9.2 9 8.8 8.1 8.8c-1.8 0-3.2 1.4-3.2 3.2s1.4 3.2 3.2 3.2c1 0 1.8-.4 2.4-1.1v-2.5H7.7v1"/>
        </svg>
      </button>
      <button class="icon-button" title="Emoji">
        <svg viewBox="0 0 24 24" width="20" height="20">
          <path fill="currentColor" d="M12 22.75C6.072 22.75 1.25 17.928 1.25 12S6.072 1.25 12 1.25 22.75 6.072 22.75 12 17.928 22.75 12 22.75zm0-20C6.9 2.75 2.75 6.9 2.75 12S6.9 21.25 12 21.25s9.25-4.15 9.25-9.25S17.1 2.75 12 2.75z"/>
          <path fill="currentColor" d="M12 17.115c-1.892 0-3.633-.95-4.656-2.544-.224-.348-.123-.81.226-1.035.348-.226.812-.124 1.036.226.747 1.162 2.016 1.855 3.395 1.855s2.648-.693 3.396-1.854c.224-.35.688-.45 1.036-.225.35.224.45.688.226 1.036-1.025 1.594-2.766 2.545-4.658 2.545z"/>
          <circle fill="currentColor" cx="14.738" cy="9.458" r="1.478"/>
          <circle fill="currentColor" cx="9.262" cy="9.458" r="1.478"/>
        </svg>
      </button>
        <button class="icon-button" title="Schedule">
        <svg viewBox="0 0 24 24" width="20" height="20">
            <path fill="currentColor" d="M19.708 2H4.292C3.028 2 2 3.028 2 4.292v15.416C2 20.972 3.028 22 4.292 22h15.416C20.972 22 22 20.972 22 19.708V4.292C22 3.028 20.972 2 19.708 2zm.792 17.708c0 .437-.355.792-.792.792H4.292c-.437 0-.792-.355-.792-.792V6.418c0-.437.354-.79.79-.792h15.42c.436 0 .79.355.79.79V19.71z"/>
            <path fill="currentColor" d="M17.5 8.5h-11a.5.5 0 0 0-.5.5v8a.5.5 0 0 0 .5.5h11a.5.5 0 0 0 .5-.5V9a.5.5 0 0 0-.5-.5zm-.5 8h-10v-7h10v7z"/>
            <path fill="currentColor" d="M7.5 4a.5.5 0 0 0-.5.5v2a.5.5 0 0 0 1 0v-2a.5.5 0 0 0-.5-.5zM16.5 4a.5.5 0 0 0-.5.5v2a.5.5 0 0 0 1 0v-2a.5.5 0 0 0-.5-.5z"/>
        </svg>
      </button>
    </div>

    <div class="post-actions">
      <button class="add-thread-button" (click)="addThreadPost()" *ngIf="threadPosts[threadPosts.length - 1].isEditing">
        <svg viewBox="0 0 24 24" width="20" height="20">
          <path fill="currentColor" d="M11 11V4h2v7h7v2h-7v7h-2v-7H4v-2h7z"/>
        </svg>
      </button>
      <button class="post-button" (click)="postThread()">
        Post {{ threadPosts.length > 1 ? 'all' : '' }}
      </button>
    </div>
  </div>
</div>